{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/eth/sc.js","webpack:///./src/index.js","webpack:///./src/promise.js","webpack:///./src/requestAdapter/browser.js","webpack:///./src/requestAny.js","webpack:///./src/utils/crypto/bs58.js","webpack:///./src/utils/file/browser.js","webpack:///./src/utils/utils.js","webpack:///external \"js-sha256\""],"names":["require","parseSCString","uuidToHash","SC_INTERFACE","SC_ADDR","sc","ensureSC","eth","Contract","getUploadNodes","fileSize","Promise","resolve","reject","methods","getPeers","call","then","ids","Object","keys","data","filter","key","startsWith","map","all","getIpPort","node","ipPorts","ipPort","replace","catch","console","error","err","getStoringNodes","uuid","fileHash","showStoringPeers","nodeHashes","test","hash","s","substring","length","module","exports","scEth","CasperPromise","requestAny","utils","REST_PORT","Casper","api","mode","blockchain","blockchainAPI","file","emit","isFile","TypeError","getFileSize","method","url","ips","on","event","ip","JSON","parse","UUID","encoding","sharingNode","path","cb","subscribers","push","message","forEach","realResolve","realReject","hijackControls","p","bind","makeRequest","headers","triggerAbort","promise","handleProgress","done","loaded","total","form","FormData","append","req","XMLHttpRequest","responseType","upload","onprogress","onload","response","onerror","open","send","abort","request","hostWorthTrying","host","rejected","canceled","config","Error","hosts","abortRequest","championHost","setChampion","progressHost","assign","possibleIps","A","bs58","encode","d","i","j","c","n","B","decode","b","S","indexOf","undefined","Uint8Array","Blob","size","sha256","val","codes","parseInt","substr","String","fromCharCode","apply","code","bytes","sha","array","encoded","concat"],"mappings":"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","file":"casper.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","const { parseSCString, uuidToHash } = require('../utils')\r\n\r\n\r\nconst SC_INTERFACE = require('./sc.abi.json')\r\nconst SC_ADDR = 'Cb4d87043e63EB3F7B605f79906911C498A31B33'\r\nlet sc\r\nconst ensureSC = eth => { if( ! sc) sc = new eth.Contract(SC_INTERFACE, SC_ADDR) }\r\n\r\n\r\nconst getUploadNodes = (eth, { fileSize }) => new Promise((resolve, reject) => {\r\n  ensureSC(eth)\r\n\r\n  sc.methods.getPeers(fileSize).call()\r\n    .then(data => {\r\n      const ids = Object.keys(data)\r\n                    .filter(key => key.startsWith('id'))\r\n                    .map(key => data[key])\r\n\r\n      return Promise.all(\r\n        ids.map(node => sc.methods.getIpPort(node).call())\r\n      )\r\n    })\r\n    .then(ipPorts => ipPorts.map(ipPort => ipPort.replace(/:.*/, '')))\r\n    .then(resolve)\r\n    .catch(err => console.error(err))\r\n})\r\n\r\n\r\nconst getStoringNodes = (eth, { uuid }) => new Promise((resolve, reject) => {\r\n  ensureSC(eth)\r\n\r\n\r\n  const fileHash = uuidToHash(uuid)\r\n  sc.methods.showStoringPeers(fileHash).call()\r\n    .then(data => {\r\n      const nodeHashes = data.filter(hash => !/^0x0*$/.test(hash))\r\n                             .map(s => s.substring(0, s.length - 2))\r\n                             .map(parseSCString)\r\n\r\n      return Promise.all(\r\n        nodeHashes.map(node => sc.methods.getIpPort(node).call())\r\n      )\r\n    })\r\n    .then(ipPorts => ipPorts.map(ipPort => ipPort.replace(/:.*/, '')))\r\n    .then(resolve)\r\n    .catch(err => console.error(err))\r\n})\r\n\r\n\r\nmodule.exports = {\r\n  getUploadNodes,\r\n  getStoringNodes\r\n}","// we use commonsjs for node export\r\nconst scEth = require('./eth/sc')\r\nconst CasperPromise = require('./promise')\r\nconst requestAny = require('./requestAny')\r\nconst utils = require('./utils')\r\n\r\n\r\nconst REST_PORT = 5001\r\nconst sc = {\r\n  eth: scEth\r\n}\r\n\r\n\r\nclass Casper {\r\n  constructor(api, mode) {\r\n    // Later we will add more blockchains and use autodetection, etherium is default mode \r\n    this.blockchain = mode || 'eth'\r\n    if(this.blockchain === 'eth') this.blockchainAPI = api.eth || api\r\n  }\r\n\r\n  /**\r\n   * Writes file into casper storage.\r\n   * If uuid is present file is overwritten\r\n   * @param {(Blob | Buffer | stream.Readable)} file \r\n   * @param {String} uuid file's unique id (from previous upload)\r\n   * @return {CasperPromise} resolves with uuid\r\n   */\r\n  save(file, uuid = false) {\r\n    return CasperPromise((resolve, reject, emit) => {\r\n      if( ! utils.isFile(file)) {\r\n        throw new TypeError('casperapi: file type must be File | Blob | ArrayBuffer | Buffer')\r\n      }\r\n\r\n      utils.getFileSize(file)\r\n        .then(fileSize => {\r\n          return sc[this.blockchain].getUploadNodes(this.blockchainAPI, { fileSize })\r\n        })\r\n        .then(ips => {\r\n          emit('sc-connected')         \r\n          let method, url\r\n          if(uuid) {\r\n            // Update\r\n            method = 'PUT'\r\n            url = `http://{host}:${REST_PORT}/casper/v0/file/${uuid}`\r\n          } else {\r\n            // Save new\r\n            method = 'POST'\r\n            url = `http://{host}:${REST_PORT}/casper/v0/file`\r\n          }\r\n\r\n          requestAny(method, url, ips, { file })\r\n            .on('progress', event => emit('progress', event))\r\n            .on('new-champion', ip => emit('node-found', ip))\r\n            .then(data => {\r\n              resolve(JSON.parse(data).UUID)\r\n            })\r\n            .catch(reject)\r\n        })\r\n        .catch(reject)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Deletes file from casper storage.  \r\n   * @param {String} uuid file's unique id (returned from upload)\r\n   * @return {CasperPromise} resolves with void\r\n   */\r\n  delete(uuid) {\r\n    return CasperPromise((resolve, reject, emit) => {\r\n      sc[this.blockchain]\r\n        .getStoringNodes(this.blockchainAPI, { uuid })\r\n        .then(ips => {\r\n          emit('sc-connected')\r\n          requestAny('DELETE', `http://{host}:${REST_PORT}/casper/v0/file/${uuid}`, ips)\r\n            .on('new-champion', ip => emit('node-found', ip))\r\n            .then(resolve)\r\n            .catch(reject)\r\n        })\r\n        .catch(reject)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Gets file from casper storage.\r\n   * @param {String} uuid file's unique id (from upload)\r\n   * @return {CasperPromise} resolves with Blob | Buffer, after the whole file is downloaded\r\n   */\r\n  getFile(uuid) {\r\n    return CasperPromise((resolve, reject, emit) => {\r\n      sc[this.blockchain]\r\n        .getStoringNodes(this.blockchainAPI, { uuid })\r\n        .then(ips => {\r\n          emit('sc-connected')\r\n          return ips\r\n        })\r\n        .then(ips => {\r\n          requestAny('GET', `http://{host}:${REST_PORT}/casper/v0/file/${uuid}`, ips, { encoding: null })\r\n            .on('progress', event => emit('progress', event))\r\n            .on('new-champion', ip => emit('node-found', ip))\r\n            .then(resolve)\r\n            .catch(reject)\r\n        })\r\n        .catch(reject)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Generates http link that allows to work with file the usual web way\r\n   * @param {String} uuid file's unique id (from upload)\r\n   */\r\n  getLink(uuid) {\r\n    return CasperPromise((resolve, reject, emit) => {\r\n      let sharingNode = ''\r\n      sc[this.blockchain]\r\n        .getStoringNodes(this.blockchainAPI, { uuid })\r\n        .then(ips => {\r\n          emit('sc-connected')\r\n          requestAny('POST', `http://{host}:${REST_PORT}/casper/v0/share/${uuid}`, ips)\r\n            .on('new-champion', ip => sharingNode = ip)\r\n            .then(path => resolve(\r\n              `http://${sharingNode}:${REST_PORT}${path}`\r\n            ))\r\n            .catch(reject)\r\n        })\r\n        .catch(reject)\r\n    })\r\n  }\r\n}\r\n\r\n\r\nmodule.exports = Casper","function on(event, cb) {\r\n  if(!this.subscribers[event]) this.subscribers[event] = []\r\n  this.subscribers[event].push(cb)\r\n  return this\r\n}\r\n\r\n\r\nfunction emit(event, message) {\r\n  if(this.subscribers[event]) this.subscribers[event].forEach(cb => cb(message))\r\n}\r\n\r\n\r\nfunction CasperPromise(cb) {\r\n  let realResolve\r\n  let realReject\r\n\r\n  const hijackControls = (resolve, reject) => {\r\n    realResolve = resolve\r\n    realReject = reject\r\n  }\r\n\r\n  let p = new Promise(hijackControls)\r\n\r\n  p.subscribers = {}\r\n  p.emit = emit.bind(p)\r\n  p.on = on.bind(p)\r\n\r\n  cb(realResolve, realReject, p.emit)\r\n  return p\r\n}\r\n\r\nmodule.exports = CasperPromise","const CasperPromise = require('../promise')\r\n\r\n\r\nconst makeRequest = ({\r\n  method = 'GET',\r\n  url,\r\n  data = {},\r\n  file,\r\n  headers,\r\n  encoding\r\n}) => {\r\n  let triggerAbort\r\n\r\n  const promise = CasperPromise((resolve, reject, emit) => {\r\n    // helpers\r\n    const handleProgress = event => {\r\n      const done = event.loaded / event.total\r\n      if(done && 0 < done && done <= 1) emit('progress', done)\r\n    }\r\n    \r\n    // preparation\r\n    const form = new FormData()\r\n    for(let key in data) {\r\n      form.append(key, data[key])\r\n    }\r\n    if(file) form.append('file', file)\r\n\r\n\r\n    // dispatching request\r\n    const req = new XMLHttpRequest()\r\n    if(encoding === null) req.responseType = 'blob'\r\n    \r\n    if(file) {\r\n      req.upload.onprogress = handleProgress\r\n    } else {\r\n      req.onprogress = handleProgress\r\n    }\r\n  \r\n    req.onload = event => resolve(req.response)\r\n    req.onerror = err => reject(err)\r\n\r\n    req.open(method, url)\r\n    req.send(form)\r\n\r\n    // providing abort feature\r\n    triggerAbort = req.abort.bind(req)\r\n  })\r\n\r\n  promise.abort = triggerAbort\r\n  return promise\r\n}\r\n\r\n\r\nmodule.exports = makeRequest","const request = require('./requestAdapter')\r\nconst CasperPromise = require('./promise')\r\n\r\n\r\nconst hostWorthTrying = host => ( ! host.rejected) || host.canceled\r\n\r\n\r\nconst requestAny = (\r\n  method, url, \r\n  ips, \r\n  config = {}\r\n) => CasperPromise((resolve, reject, emit) => {\r\n  ips = ips.filter(ip => ip !== '0.0.0.0')\r\n  if(ips.length === 0) reject(new Error('casperapi: No hosts to handle request'))\r\n\r\n  // preparation\r\n  const hosts = ips.map(ip => ({\r\n    ip,\r\n    rejected: false,\r\n    canceled: false,\r\n    abortRequest: null\r\n  }))\r\n  \r\n  let championHost = ''\r\n  \r\n  const setChampion = host => {\r\n    championHost = host\r\n    emit('new-champion', host.ip)\r\n  }\r\n\r\n  const handleProgress = progressHost => event => {\r\n    if( ! championHost) setChampion(progressHost)\r\n    \r\n    hosts\r\n      .filter(host => host !== championHost)\r\n      .map(host => host.abortRequest())\r\n    \r\n    if(progressHost === championHost) {\r\n      emit('progress', event)\r\n    }\r\n  }\r\n\r\n\r\n  // dispatching requests\r\n  hosts.forEach(host => {\r\n    // would introcduce babel later\r\n    const req = request(Object.assign({}, config, {\r\n      method,\r\n      url: url.replace('{host}', host.ip),\r\n    }))\r\n    host.abortRequest = req.abort\r\n\r\n    req\r\n      .on('progress', handleProgress(host))\r\n      .then(response => {\r\n        // avoiding multiple resolves\r\n        if( ! championHost) setChampion(host)\r\n        if(host === championHost) resolve(response)\r\n      })\r\n      .catch(err => {\r\n        // console.log('Host err', err)\r\n        host.rejected = true\r\n\r\n        if(host === championHost) {\r\n          // trying other requests that didn't fail\r\n          const possibleIps = hosts\r\n                                .filter(hostWorthTrying)\r\n                                .map(host => host.ip)\r\n          \r\n\r\n          requestAny(method, url, possibleIps, config)\r\n            .on('progress', done => emit('progress', done))\r\n            .on('new-champion', ip => emit('new-champion', ip))\r\n            .then(resolve)\r\n            .catch(err => {\r\n              reject(new Error('casperapi: All hosts are unreachable'))\r\n            })\r\n        } else if(hosts.filter(hostWorthTrying).length === 0) {\r\n          reject(new Error('casperapi: All hosts are unreachable'))\r\n        }\r\n      })\r\n  })\r\n})\r\n\r\n\r\nmodule.exports = requestAny","const A = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\r\nconst bs58 = {}\r\n\r\nbs58.encode = B => {\r\n  let d = [],   //the array for storing the stream of base58 digits\r\n      s = \"\",   //the result string variable that will be returned\r\n      i,        //the iterator variable for the byte input\r\n      j,        //the iterator variable for the base58 digit array (d)\r\n      c,        //the carry amount variable that is used to overflow from the current base58 digit to the next base58 digit\r\n      n;        //a temporary placeholder variable for the current base58 digit\r\n  for(i in B) { //loop through each byte in the input stream\r\n      j = 0,                           //reset the base58 digit iterator\r\n      c = B[i];                        //set the initial carry amount equal to the current byte amount\r\n      s += c || s.length ^ i ? \"\" : 1; //prepend the result string with a \"1\" (0 in base58) if the byte stream is zero and non-zero bytes haven't been seen yet (to ensure correct decode length)\r\n      while(j in d || c) {             //start looping through the digits until there are no more digits and no carry amount\r\n          n = d[j];                    //set the placeholder for the current base58 digit\r\n          n = n ? n * 256 + c : c;     //shift the current base58 one byte and add the carry amount (or just add the carry amount if this is a new digit)\r\n          c = n / 58 | 0;              //find the new carry amount (floored integer of current digit divided by 58)\r\n          d[j] = n % 58;               //reset the current base58 digit to the remainder (the carry amount will pass on the overflow)\r\n          j++                          //iterate to the next base58 digit\r\n      }\r\n  }\r\n  while(j--)        //since the base58 digits are backwards, loop through them in reverse order\r\n      s += A[d[j]]; //lookup the character associated with each base58 digit\r\n  return s          //return the final base58 string\r\n}\r\n\r\n\r\nbs58.decode = S => {\r\n  let d = [],   //the array for storing the stream of decoded bytes\r\n      b = [],   //the result byte array that will be returned\r\n      i,        //the iterator variable for the base58 string\r\n      j,        //the iterator variable for the byte array (d)\r\n      c,        //the carry amount variable that is used to overflow from the current byte to the next byte\r\n      n;        //a temporary placeholder variable for the current byte\r\n  for(i in S) { //loop through each base58 character in the input string\r\n      j = 0,                             //reset the byte iterator\r\n      c = A.indexOf( S[i] );             //set the initial carry amount equal to the current base58 digit\r\n      if(c < 0)                          //see if the base58 digit lookup is invalid (-1)\r\n          return undefined;              //if invalid base58 digit, bail out and return undefined\r\n      c || b.length ^ i ? i : b.push(0); //prepend the result array with a zero if the base58 digit is zero and non-zero characters haven't been seen yet (to ensure correct decode length)\r\n      while(j in d || c) {               //start looping through the bytes until there are no more bytes and no carry amount\r\n          n = d[j];                      //set the placeholder for the current byte\r\n          n = n ? n * 58 + c : c;        //shift the current byte 58 units and add the carry amount (or just add the carry amount if this is a new byte)\r\n          c = n >> 8;                    //find the new carry amount (1-byte shift of current byte value)\r\n          d[j] = n % 256;                //reset the current byte to the remainder (the carry amount will pass on the overflow)\r\n          j++                            //iterate to the next byte\r\n      }\r\n  }\r\n  while(j--)               //since the byte array is backwards, loop through it in reverse order\r\n      b.push( d[j] );      //append each byte to the result\r\n  return new Uint8Array(b) //return the final byte array in Uint8Array format\r\n}\r\n\r\nmodule.exports = bs58","const isFile = file => {\r\n  if(file instanceof Blob) return true\r\n  return false\r\n}\r\n\r\nconst getFileSize = file => new Promise(resolve => {\r\n  if (file instanceof Blob) return resolve(file.size)\r\n  reject(new Error('casperapi: Cannot compute file size'))\r\n})\r\n\r\n\r\nmodule.exports = {\r\n  isFile,\r\n  getFileSize\r\n}","const sha256 = require('js-sha256')\r\nconst bs58 = require('./crypto/bs58')\r\nconst { isFile, getFileSize } = require('./file')\r\n\r\n\r\nconst parseSCString = hash => {\r\n  const val = hash.substring(2)\r\n  const codes = []\r\n\r\n  for(let i=0; i < val.length; i += 2) {\r\n    codes.push(parseInt(val.substr(i, 2), 16))\r\n  }\r\n\r\n  return String.fromCharCode.apply(0, codes.filter(code => code !== 0))\r\n}\r\n\r\n\r\nconst uuidToHash = uuid => {\r\n  const bytes = bs58.decode(uuid)\r\n  const sha = sha256.array(bytes)\r\n  \r\n  const encoded = new Uint8Array([18, sha.length].concat(sha)) \r\n  const hash = bs58.encode(encoded)\r\n\r\n  return hash\r\n}\r\n\r\n\r\nmodule.exports = {\r\n  parseSCString,\r\n  isFile,\r\n  getFileSize,\r\n  uuidToHash\r\n}","module.exports = require(\"js-sha256\");"],"sourceRoot":""}